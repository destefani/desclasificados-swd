<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About - Declassified CIA Documents on Chile</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --danger: #dc2626;
            --warning: #f59e0b;
            --success: #10b981;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
        }

        * { box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: var(--gray-100);
            color: var(--gray-800);
            line-height: 1.7;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        nav {
            width: 250px;
            background: var(--gray-800);
            color: white;
            padding: 20px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        nav h2 {
            margin-top: 0;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--gray-200);
        }

        nav ul { list-style: none; padding: 0; margin: 0; }
        nav li { margin: 8px 0; }
        nav a {
            color: var(--gray-200);
            text-decoration: none;
            font-size: 0.9rem;
            display: block;
            padding: 6px 10px;
            border-radius: 4px;
            transition: background 0.2s;
        }
        nav a:hover { background: rgba(255,255,255,0.1); }
        nav a.active { background: var(--primary); color: white; }
        nav .nav-section {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        nav .nav-section-title {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: rgba(255,255,255,0.5);
            margin-bottom: 8px;
            padding-left: 10px;
        }

        main {
            flex: 1;
            margin-left: 250px;
            padding: 0;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--gray-900) 0%, var(--gray-800) 100%);
            color: white;
            padding: 60px 40px;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .hero-content {
            position: relative;
            max-width: 800px;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin: 0 0 15px 0;
            font-weight: 700;
            line-height: 1.2;
        }

        .hero .subtitle {
            font-size: 1.25rem;
            color: var(--gray-300);
            margin-bottom: 25px;
        }

        .hero-stats {
            display: flex;
            gap: 40px;
            margin-top: 30px;
        }

        .hero-stat {
            text-align: center;
        }

        .hero-stat .number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .hero-stat .label {
            font-size: 0.9rem;
            color: var(--gray-300);
        }

        /* Content Sections */
        .content {
            padding: 40px;
            max-width: 1000px;
        }

        .section {
            background: white;
            border-radius: 12px;
            padding: 30px 35px;
            margin-bottom: 25px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .section h2 {
            color: var(--gray-800);
            margin: 0 0 20px 0;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section h2 .icon {
            font-size: 1.5rem;
        }

        .section h3 {
            color: var(--gray-700);
            margin: 25px 0 15px 0;
            font-size: 1.1rem;
        }

        .section p {
            color: var(--gray-600);
            margin: 0 0 15px 0;
        }

        .section ul {
            color: var(--gray-600);
            padding-left: 20px;
        }

        .section li {
            margin-bottom: 8px;
        }

        /* Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .card {
            background: var(--gray-50);
            border-radius: 8px;
            padding: 20px;
            border: 1px solid var(--gray-200);
        }

        .card h4 {
            margin: 0 0 10px 0;
            color: var(--gray-800);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card p {
            margin: 0;
            font-size: 0.95rem;
        }

        /* Classification Legend */
        .classification-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
        }

        .classification-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .classification-badge {
            padding: 3px 10px;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.75rem;
        }

        .badge-top-secret { background: #fef2f2; color: #dc2626; }
        .badge-secret { background: #fff7ed; color: #ea580c; }
        .badge-confidential { background: #fefce8; color: #ca8a04; }
        .badge-unclassified { background: #f0fdf4; color: #16a34a; }

        /* Callout Box */
        .callout {
            background: #eff6ff;
            border-left: 4px solid var(--primary);
            padding: 15px 20px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }

        .callout.warning {
            background: #fef3c7;
            border-left-color: var(--warning);
        }

        .callout h4 {
            margin: 0 0 8px 0;
            color: var(--gray-800);
        }

        .callout p {
            margin: 0;
            font-size: 0.95rem;
        }

        /* Pipeline Diagram */
        .pipeline-diagram {
            background: var(--gray-50);
            border-radius: 8px;
            padding: 30px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .pipeline-diagram svg {
            display: block;
            margin: 0 auto;
            max-width: 100%;
            height: auto;
        }

        /* Tech Stack */
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .tech-item {
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .tech-item .tech-name {
            font-weight: 600;
            color: var(--gray-800);
            margin-bottom: 5px;
        }

        .tech-item .tech-use {
            font-size: 0.85rem;
            color: var(--gray-600);
        }

        /* Collapsible Technical Section */
        .technical-toggle {
            background: var(--gray-800);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            transition: background 0.2s;
        }

        .technical-toggle:hover {
            background: var(--gray-700);
        }

        .technical-toggle h3 {
            margin: 0;
            font-size: 1.1rem;
        }

        .technical-toggle .arrow {
            transition: transform 0.3s;
        }

        .technical-content {
            display: none;
        }

        .technical-content.open {
            display: block;
        }

        .technical-toggle.open .arrow {
            transform: rotate(180deg);
        }

        /* Code Block */
        .code-block {
            background: var(--gray-900);
            color: #e5e7eb;
            padding: 15px 20px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            margin: 15px 0;
        }

        /* Footer */
        .footer {
            background: var(--gray-800);
            color: var(--gray-300);
            padding: 30px 40px;
            text-align: center;
            font-size: 0.9rem;
        }

        .footer a {
            color: var(--primary);
        }

        /* Responsive */
        @media (max-width: 900px) {
            nav { display: none; }
            main { margin-left: 0; }
            .hero { padding: 40px 20px; }
            .hero h1 { font-size: 1.8rem; }
            .hero-stats { flex-wrap: wrap; gap: 20px; }
            .content { padding: 20px; }
            .section { padding: 20px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav>
            <h2>Desclasificados</h2>
            <ul>
                <li><a href="index.html">Dashboard</a></li>
                <li><a href="about.html" class="active">About This Project</a></li>
            </ul>
            <div class="nav-section">
                <div class="nav-section-title">Research Questions</div>
                <ul>
                    <li><a href="reports/rq-001-economic-intervention.html">RQ-001: Economic Intervention</a></li>
                    <li><a href="reports/rq-002-coup-1973.html">RQ-002: Coup Origins</a></li>
                    <li><a href="reports/rq-003-pinochet-regime.html">RQ-003: Civilians in Dictatorship</a></li>
                </ul>
            </div>
            <div class="nav-section">
                <div class="nav-section-title">External</div>
                <ul>
                    <li><a href="https://github.com/destefani/desclasificados-swd" target="_blank">GitHub Repository</a></li>
                </ul>
            </div>
        </nav>

        <main>
            <!-- Hero Section -->
            <section class="hero">
                <div class="hero-content">
                    <h1>Making Declassified CIA Documents on Chile Accessible</h1>
                    <p class="subtitle">
                        AI-powered analysis of ~20,000 declassified documents related to the Chilean dictatorship (1973-1990)
                    </p>
                    <div class="hero-stats">
                        <div class="hero-stat">
                            <div class="number">5,666</div>
                            <div class="label">Documents Indexed</div>
                        </div>
                        <div class="hero-stat">
                            <div class="number">12,811</div>
                            <div class="label">Searchable Chunks</div>
                        </div>
                        <div class="hero-stat">
                            <div class="number">3</div>
                            <div class="label">Research Reports</div>
                        </div>
                    </div>
                </div>
            </section>

            <div class="content">
                <!-- What Are These Documents -->
                <section class="section">
                    <h2><span class="icon">üìú</span> What Are These Documents?</h2>
                    <p>
                        The United States government has declassified a massive collection of CIA documents related to the
                        Chilean dictatorship under General Augusto Pinochet (1973-1990). These documents include cables,
                        memoranda, intelligence briefs, and reports that reveal what US intelligence knew about events in Chile.
                    </p>
                    <p>
                        The collection covers a critical period in Chilean history: the overthrow of democratically-elected
                        President Salvador Allende in 1973, the subsequent military dictatorship, human rights violations,
                        and the eventual transition to democracy in 1990.
                    </p>

                    <h3>Understanding Classification Levels</h3>
                    <p>Documents are marked with classification levels that indicate their original sensitivity:</p>
                    <div class="classification-legend">
                        <div class="classification-item">
                            <span class="classification-badge badge-top-secret">TOP SECRET</span>
                            <span>Highest sensitivity - grave damage if disclosed</span>
                        </div>
                        <div class="classification-item">
                            <span class="classification-badge badge-secret">SECRET</span>
                            <span>Serious damage if disclosed</span>
                        </div>
                        <div class="classification-item">
                            <span class="classification-badge badge-confidential">CONFIDENTIAL</span>
                            <span>Damage if disclosed</span>
                        </div>
                        <div class="classification-item">
                            <span class="classification-badge badge-unclassified">UNCLASSIFIED</span>
                            <span>Approved for public release</span>
                        </div>
                    </div>
                    <p style="font-size: 0.9rem; color: var(--gray-600);">
                        Note: All documents in this archive have been declassified and are now publicly available.
                        The classification labels shown indicate their <em>original</em> sensitivity level.
                    </p>
                </section>

                <!-- Why This Matters -->
                <section class="section">
                    <h2><span class="icon">üí°</span> Why This Matters</h2>
                    <div class="cards-grid">
                        <div class="card">
                            <h4>üîç Historical Research</h4>
                            <p>Primary sources for understanding US-Chile relations, Cold War dynamics, and intelligence operations during a pivotal era.</p>
                        </div>
                        <div class="card">
                            <h4>‚öñÔ∏è Human Rights</h4>
                            <p>Evidence for ongoing accountability efforts regarding disappearances, torture, and other human rights violations.</p>
                        </div>
                        <div class="card">
                            <h4>üì∞ Journalism</h4>
                            <p>Source material for investigative reporting and fact-checking historical claims about US involvement.</p>
                        </div>
                        <div class="card">
                            <h4>üéì Education</h4>
                            <p>Teaching resource for courses on Latin American history, Cold War studies, and government transparency.</p>
                        </div>
                    </div>
                </section>

                <!-- The Problem We Solve -->
                <section class="section">
                    <h2><span class="icon">üéØ</span> The Problem We Solve</h2>
                    <p>
                        While these documents are technically public, their sheer volume makes them practically inaccessible:
                    </p>
                    <ul>
                        <li><strong>~20,000 documents</strong> would take months to review manually</li>
                        <li><strong>Scanned PDFs</strong> with varying quality, no searchable text</li>
                        <li><strong>No unified index</strong> or standardized metadata</li>
                        <li><strong>Scattered information</strong> across document types, time periods, and classification levels</li>
                    </ul>
                    <p>
                        This project transforms these documents into a searchable, structured database that enables
                        researchers to find relevant information in minutes rather than months.
                    </p>
                </section>

                <!-- How It Works (Simple) -->
                <section class="section">
                    <h2><span class="icon">ü§ñ</span> How the AI Works</h2>
                    <p>
                        We use a technique called <strong>RAG (Retrieval-Augmented Generation)</strong> to answer
                        questions about the documents. Here's the simple version:
                    </p>

                    <div class="pipeline-diagram">
                        <svg viewBox="0 0 800 200" xmlns="http://www.w3.org/2000/svg">
                            <!-- Step 1: Question -->
                            <g transform="translate(20,50)">
                                <rect x="0" y="0" width="140" height="80" rx="8" fill="#eff6ff" stroke="#2563eb" stroke-width="2"/>
                                <text x="70" y="35" text-anchor="middle" font-size="12" font-weight="600" fill="#1e40af">1. You Ask</text>
                                <text x="70" y="55" text-anchor="middle" font-size="10" fill="#4b5563">"What did the CIA</text>
                                <text x="70" y="68" text-anchor="middle" font-size="10" fill="#4b5563">know about...?"</text>
                            </g>

                            <!-- Arrow 1 -->
                            <path d="M170 90 L210 90" stroke="#9ca3af" stroke-width="2" marker-end="url(#arrowhead)"/>

                            <!-- Step 2: Search -->
                            <g transform="translate(220,50)">
                                <rect x="0" y="0" width="140" height="80" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
                                <text x="70" y="35" text-anchor="middle" font-size="12" font-weight="600" fill="#92400e">2. AI Searches</text>
                                <text x="70" y="55" text-anchor="middle" font-size="10" fill="#4b5563">Finds relevant</text>
                                <text x="70" y="68" text-anchor="middle" font-size="10" fill="#4b5563">document chunks</text>
                            </g>

                            <!-- Arrow 2 -->
                            <path d="M370 90 L410 90" stroke="#9ca3af" stroke-width="2" marker-end="url(#arrowhead)"/>

                            <!-- Step 3: Analyze -->
                            <g transform="translate(420,50)">
                                <rect x="0" y="0" width="140" height="80" rx="8" fill="#f0fdf4" stroke="#10b981" stroke-width="2"/>
                                <text x="70" y="35" text-anchor="middle" font-size="12" font-weight="600" fill="#166534">3. AI Analyzes</text>
                                <text x="70" y="55" text-anchor="middle" font-size="10" fill="#4b5563">Synthesizes answer</text>
                                <text x="70" y="68" text-anchor="middle" font-size="10" fill="#4b5563">from sources</text>
                            </g>

                            <!-- Arrow 3 -->
                            <path d="M570 90 L610 90" stroke="#9ca3af" stroke-width="2" marker-end="url(#arrowhead)"/>

                            <!-- Step 4: Answer -->
                            <g transform="translate(620,50)">
                                <rect x="0" y="0" width="140" height="80" rx="8" fill="#eff6ff" stroke="#2563eb" stroke-width="2"/>
                                <text x="70" y="35" text-anchor="middle" font-size="12" font-weight="600" fill="#1e40af">4. You Get</text>
                                <text x="70" y="55" text-anchor="middle" font-size="10" fill="#4b5563">Answer with</text>
                                <text x="70" y="68" text-anchor="middle" font-size="10" fill="#4b5563">source citations</text>
                            </g>

                            <!-- Arrow marker definition -->
                            <defs>
                                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#9ca3af"/>
                                </marker>
                            </defs>
                        </svg>
                    </div>

                    <div class="callout">
                        <h4>Key Benefit: Source Transparency</h4>
                        <p>
                            Unlike a regular chatbot, every answer includes citations to specific declassified documents.
                            You can verify the AI's claims by reading the original sources yourself.
                        </p>
                    </div>
                </section>

                <!-- Important Caveats -->
                <section class="section">
                    <h2><span class="icon">‚ö†Ô∏è</span> Important Caveats</h2>
                    <div class="callout warning">
                        <h4>This is the CIA's Perspective Only</h4>
                        <p>
                            These documents represent a single source - the CIA. They may contain errors, biases,
                            incomplete information, or deliberate omissions. A complete understanding of this
                            historical period requires consulting Chilean archives, survivor testimonies,
                            human rights reports, and academic research.
                        </p>
                    </div>
                    <ul>
                        <li><strong>Redactions</strong> - Many documents have blacked-out sections protecting sources and methods</li>
                        <li><strong>Incomplete</strong> - Many documents remain classified and are not in this collection</li>
                        <li><strong>US Perspective</strong> - Information reflects American interests and analytical frameworks</li>
                        <li><strong>AI Limitations</strong> - The transcription and analysis may contain errors</li>
                    </ul>
                </section>

                <!-- Technical Deep Dive Toggle -->
                <div class="technical-toggle" onclick="toggleTechnical()">
                    <h3>üîß Technical Deep Dive</h3>
                    <span class="arrow">‚ñº</span>
                </div>

                <div class="technical-content" id="technical-content">
                    <!-- Architecture -->
                    <section class="section">
                        <h2>System Architecture</h2>
                        <p>The system processes documents through three main stages:</p>

                        <div class="pipeline-diagram">
                            <svg viewBox="0 0 900 320" xmlns="http://www.w3.org/2000/svg">
                                <!-- Stage 1: Transcription -->
                                <g transform="translate(20,20)">
                                    <rect x="0" y="0" width="260" height="280" rx="12" fill="#fef2f2" stroke="#dc2626" stroke-width="2"/>
                                    <text x="130" y="30" text-anchor="middle" font-size="14" font-weight="700" fill="#991b1b">Stage 1: Transcription</text>

                                    <!-- PDF Icon -->
                                    <rect x="30" y="50" width="60" height="70" rx="4" fill="white" stroke="#dc2626"/>
                                    <text x="60" y="90" text-anchor="middle" font-size="10" fill="#dc2626">PDF</text>

                                    <!-- Arrow -->
                                    <path d="M100 85 L130 85" stroke="#9ca3af" stroke-width="2" marker-end="url(#arrowhead2)"/>

                                    <!-- GPT-4o -->
                                    <rect x="140" y="55" width="100" height="60" rx="8" fill="#10b981" stroke="none"/>
                                    <text x="190" y="80" text-anchor="middle" font-size="10" font-weight="600" fill="white">GPT-4o-mini</text>
                                    <text x="190" y="95" text-anchor="middle" font-size="8" fill="white">Vision Model</text>

                                    <!-- Arrow down -->
                                    <path d="M190 125 L190 145" stroke="#9ca3af" stroke-width="2" marker-end="url(#arrowhead2)"/>

                                    <!-- JSON Output -->
                                    <rect x="140" y="155" width="100" height="50" rx="4" fill="white" stroke="#6b7280"/>
                                    <text x="190" y="175" text-anchor="middle" font-size="10" fill="#374151">Structured</text>
                                    <text x="190" y="190" text-anchor="middle" font-size="10" fill="#374151">JSON</text>

                                    <!-- Details -->
                                    <text x="20" y="230" font-size="9" fill="#6b7280">‚Ä¢ Multi-page PDF processing</text>
                                    <text x="20" y="245" font-size="9" fill="#6b7280">‚Ä¢ Metadata extraction</text>
                                    <text x="20" y="260" font-size="9" fill="#6b7280">‚Ä¢ OCR with context</text>
                                </g>

                                <!-- Arrow between stages -->
                                <path d="M290 160 L320 160" stroke="#4b5563" stroke-width="3" marker-end="url(#arrowhead2)"/>

                                <!-- Stage 2: Indexing -->
                                <g transform="translate(320,20)">
                                    <rect x="0" y="0" width="260" height="280" rx="12" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
                                    <text x="130" y="30" text-anchor="middle" font-size="14" font-weight="700" fill="#92400e">Stage 2: Indexing</text>

                                    <!-- JSON files -->
                                    <rect x="30" y="55" width="50" height="40" rx="4" fill="white" stroke="#6b7280"/>
                                    <rect x="40" y="65" width="50" height="40" rx="4" fill="white" stroke="#6b7280"/>
                                    <rect x="50" y="75" width="50" height="40" rx="4" fill="white" stroke="#6b7280"/>
                                    <text x="75" y="100" text-anchor="middle" font-size="8" fill="#374151">5,666 JSONs</text>

                                    <!-- Arrow -->
                                    <path d="M110 95 L130 95" stroke="#9ca3af" stroke-width="2" marker-end="url(#arrowhead2)"/>

                                    <!-- Chunking -->
                                    <rect x="140" y="60" width="100" height="35" rx="4" fill="#f59e0b"/>
                                    <text x="190" y="82" text-anchor="middle" font-size="9" fill="white">Chunk (512 tokens)</text>

                                    <!-- Arrow -->
                                    <path d="M190 105 L190 115" stroke="#9ca3af" stroke-width="2" marker-end="url(#arrowhead2)"/>

                                    <!-- Embedding -->
                                    <rect x="140" y="125" width="100" height="35" rx="4" fill="#2563eb"/>
                                    <text x="190" y="142" text-anchor="middle" font-size="9" fill="white">Embed</text>
                                    <text x="190" y="152" text-anchor="middle" font-size="7" fill="white">(text-embedding-3-small)</text>

                                    <!-- Arrow -->
                                    <path d="M190 170 L190 180" stroke="#9ca3af" stroke-width="2" marker-end="url(#arrowhead2)"/>

                                    <!-- ChromaDB -->
                                    <rect x="130" y="190" width="120" height="40" rx="8" fill="#7c3aed"/>
                                    <text x="190" y="210" text-anchor="middle" font-size="10" font-weight="600" fill="white">ChromaDB</text>
                                    <text x="190" y="222" text-anchor="middle" font-size="8" fill="white">Vector Store</text>

                                    <!-- Details -->
                                    <text x="20" y="250" font-size="9" fill="#6b7280">‚Ä¢ 12,811 searchable chunks</text>
                                    <text x="20" y="265" font-size="9" fill="#6b7280">‚Ä¢ Semantic similarity search</text>
                                </g>

                                <!-- Arrow between stages -->
                                <path d="M590 160 L620 160" stroke="#4b5563" stroke-width="3" marker-end="url(#arrowhead2)"/>

                                <!-- Stage 3: Query -->
                                <g transform="translate(620,20)">
                                    <rect x="0" y="0" width="260" height="280" rx="12" fill="#eff6ff" stroke="#2563eb" stroke-width="2"/>
                                    <text x="130" y="30" text-anchor="middle" font-size="14" font-weight="700" fill="#1e40af">Stage 3: Query</text>

                                    <!-- Question -->
                                    <rect x="30" y="50" width="80" height="40" rx="4" fill="white" stroke="#2563eb"/>
                                    <text x="70" y="75" text-anchor="middle" font-size="9" fill="#2563eb">Question</text>

                                    <!-- Arrow -->
                                    <path d="M120 70 L140 70" stroke="#9ca3af" stroke-width="2" marker-end="url(#arrowhead2)"/>

                                    <!-- Retrieval -->
                                    <rect x="150" y="50" width="90" height="40" rx="4" fill="#7c3aed"/>
                                    <text x="195" y="70" text-anchor="middle" font-size="9" fill="white">Retrieve</text>
                                    <text x="195" y="82" text-anchor="middle" font-size="7" fill="white">Top-K chunks</text>

                                    <!-- Arrow -->
                                    <path d="M195 100 L195 115" stroke="#9ca3af" stroke-width="2" marker-end="url(#arrowhead2)"/>

                                    <!-- Context + Question -->
                                    <rect x="100" y="125" width="140" height="45" rx="4" fill="#f3f4f6" stroke="#6b7280"/>
                                    <text x="170" y="145" text-anchor="middle" font-size="9" fill="#374151">Context + Question</text>
                                    <text x="170" y="160" text-anchor="middle" font-size="7" fill="#6b7280">(retrieved chunks)</text>

                                    <!-- Arrow -->
                                    <path d="M170 180 L170 195" stroke="#9ca3af" stroke-width="2" marker-end="url(#arrowhead2)"/>

                                    <!-- Claude -->
                                    <rect x="100" y="205" width="140" height="40" rx="8" fill="#10b981"/>
                                    <text x="170" y="225" text-anchor="middle" font-size="10" font-weight="600" fill="white">Claude / GPT-4o</text>
                                    <text x="170" y="238" text-anchor="middle" font-size="8" fill="white">Answer Synthesis</text>

                                    <!-- Details -->
                                    <text x="20" y="265" font-size="9" fill="#6b7280">‚Ä¢ Cited answers with sources</text>
                                </g>

                                <!-- Arrow marker -->
                                <defs>
                                    <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#9ca3af"/>
                                    </marker>
                                </defs>
                            </svg>
                        </div>
                    </section>

                    <!-- Tech Stack -->
                    <section class="section">
                        <h2>Technology Stack</h2>
                        <div class="tech-stack">
                            <div class="tech-item">
                                <div class="tech-name">Python 3.11+</div>
                                <div class="tech-use">Core language</div>
                            </div>
                            <div class="tech-item">
                                <div class="tech-name">OpenAI GPT-4o-mini</div>
                                <div class="tech-use">Document transcription (vision)</div>
                            </div>
                            <div class="tech-item">
                                <div class="tech-name">OpenAI Embeddings</div>
                                <div class="tech-use">text-embedding-3-small</div>
                            </div>
                            <div class="tech-item">
                                <div class="tech-name">ChromaDB</div>
                                <div class="tech-use">Vector database (local)</div>
                            </div>
                            <div class="tech-item">
                                <div class="tech-name">Claude 3.5 Haiku</div>
                                <div class="tech-use">Answer synthesis (default)</div>
                            </div>
                            <div class="tech-item">
                                <div class="tech-name">UV</div>
                                <div class="tech-use">Python package manager</div>
                            </div>
                        </div>
                    </section>

                    <!-- Data Pipeline Details -->
                    <section class="section">
                        <h2>Data Pipeline Details</h2>

                        <h3>1. PDF Transcription</h3>
                        <p>Each PDF is processed with OpenAI's vision model to extract:</p>
                        <ul>
                            <li>Full text transcription (handling multi-page documents)</li>
                            <li>Structured metadata: dates, authors, recipients, classification</li>
                            <li>Document type classification (CABLE, MEMORANDUM, etc.)</li>
                            <li>Keywords and thematic tags</li>
                        </ul>
                        <div class="code-block">
# Example transcript structure
{
  "metadata": {
    "document_date": "1976-03-15",
    "classification": "SECRET",
    "document_type": "CABLE",
    "authors": ["KISSINGER, HENRY"],
    "keywords": ["OPERATION CONDOR", "HUMAN RIGHTS"]
  },
  "original_text": "...",
  "reviewed_text": "..."
}</div>

                        <h3>2. Vector Indexing</h3>
                        <p>Documents are chunked and embedded for semantic search:</p>
                        <ul>
                            <li><strong>Chunk size:</strong> 512 tokens with 128-token overlap</li>
                            <li><strong>Embedding model:</strong> OpenAI text-embedding-3-small (1536 dimensions)</li>
                            <li><strong>Vector store:</strong> ChromaDB with persistent storage</li>
                            <li><strong>Metadata filters:</strong> Date range, classification, keywords</li>
                        </ul>

                        <h3>3. RAG Query Pipeline</h3>
                        <ol>
                            <li>User question is embedded using the same model</li>
                            <li>ChromaDB performs cosine similarity search</li>
                            <li>Top-K relevant chunks are retrieved (default K=15)</li>
                            <li>Chunks are assembled into a context prompt</li>
                            <li>Claude/GPT synthesizes an answer with citations</li>
                        </ol>
                    </section>

                    <!-- RAG Versioning -->
                    <section class="section">
                        <h2>RAG Index Versioning</h2>
                        <p>
                            The system maintains versioned RAG indexes to track data provenance:
                        </p>
                        <div class="code-block">
# Current index: RAG v1.0.0
- Total documents: 5,666
- Total chunks: 12,811
- Sources:
  - gpt-5-mini-v2.2.0: 4,206 documents
  - gpt-5-mini-v2.0.0: 1,460 documents
- Embedding model: text-embedding-3-small</div>
                        <p>
                            Each version includes a manifest file tracking which transcript sources
                            were used, enabling reproducibility and audit trails.
                        </p>
                    </section>

                    <!-- Source Code -->
                    <section class="section">
                        <h2>Source Code</h2>
                        <p>
                            The project is open source and available on GitHub:
                        </p>
                        <p>
                            <a href="https://github.com/destefani/desclasificados-swd" target="_blank" style="color: var(--primary); font-weight: 600;">
                                github.com/destefani/desclasificados-swd
                            </a>
                        </p>
                        <h3>Key Files</h3>
                        <ul>
                            <li><code>app/transcribe.py</code> - PDF transcription with vision models</li>
                            <li><code>app/rag/</code> - RAG system (embeddings, retrieval, QA)</li>
                            <li><code>app/research_reports.py</code> - Report generation</li>
                            <li><code>app/analyze_documents.py</code> - Analysis and visualization</li>
                        </ul>
                    </section>
                </div>

            </div>

            <footer class="footer">
                <p>
                    Desclasificados - Making declassified documents accessible through AI<br>
                    <a href="https://github.com/destefani/desclasificados-swd" target="_blank">GitHub</a>
                </p>
            </footer>
        </main>
    </div>

    <script>
        function toggleTechnical() {
            const content = document.getElementById('technical-content');
            const toggle = document.querySelector('.technical-toggle');
            content.classList.toggle('open');
            toggle.classList.toggle('open');
        }
    </script>
</body>
</html>
