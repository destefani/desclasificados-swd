{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["metadata", "original_text", "reviewed_text", "confidence"],
  "additionalProperties": false,
  "properties": {
    "metadata": {
      "type": "object",
      "required": [
        "document_id",
        "case_number",
        "document_date",
        "classification_level",
        "declassification_date",
        "document_type",
        "author",
        "recipients",
        "people_mentioned",
        "country",
        "city",
        "other_place",
        "document_title",
        "document_description",
        "archive_location",
        "observations",
        "language",
        "keywords",
        "page_count",
        "document_summary"
      ],
      "additionalProperties": false,
      "properties": {
        "document_id": {
          "type": "string",
          "description": "Unique document identifier from headers, footers, stamps, or control numbers"
        },
        "case_number": {
          "type": "string",
          "description": "Case or project number (e.g., C5199900030 for Chile Project)",
          "pattern": "^[A-Z0-9]*$"
        },
        "document_date": {
          "type": "string",
          "description": "ISO 8601 date (YYYY-MM-DD, use 00 for unknown day/month)",
          "pattern": "^\\d{4}-(0[0-9]|1[0-2])-(0[0-9]|[12][0-9]|3[01])$"
        },
        "classification_level": {
          "type": "string",
          "enum": ["TOP SECRET", "SECRET", "CONFIDENTIAL", "UNCLASSIFIED", ""],
          "description": "Original classification marking on the document"
        },
        "declassification_date": {
          "type": "string",
          "description": "Date document was declassified (YYYY-MM-DD), empty if not visible",
          "pattern": "^(\\d{4}-(0[0-9]|1[0-2])-(0[0-9]|[12][0-9]|3[01]))?$"
        },
        "document_type": {
          "type": "string",
          "enum": ["MEMORANDUM", "LETTER", "TELEGRAM", "INTELLIGENCE BRIEF", "REPORT", "MEETING MINUTES", "CABLE", ""],
          "description": "Standardized document type"
        },
        "author": {
          "type": "string",
          "description": "Author name in 'LAST, FIRST' format (uppercase). Use [FIRST NAME UNKNOWN] if only last name visible."
        },
        "recipients": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of recipients in 'LAST, FIRST' format (uppercase)"
        },
        "people_mentioned": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "People mentioned in document body (not just author/recipients)"
        },
        "country": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[A-Z\\s]+$"
          },
          "description": "Countries mentioned in document (uppercase)"
        },
        "city": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[A-Z\\s]+$"
          },
          "description": "Cities mentioned in document (uppercase)"
        },
        "other_place": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Other locations like regions, landmarks, or geographic areas"
        },
        "document_title": {
          "type": "string",
          "description": "Document title, subject line, or heading"
        },
        "document_description": {
          "type": "string",
          "description": "Brief description of document type and main subject"
        },
        "archive_location": {
          "type": "string",
          "description": "Archive collection, repository, or file location marked on document"
        },
        "observations": {
          "type": "string",
          "description": "Notes on document condition, redactions, illegibility, stamps, annotations"
        },
        "language": {
          "type": "string",
          "enum": ["ENGLISH", "SPANISH", ""],
          "description": "Primary document language"
        },
        "keywords": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[A-Z0-9\\s\\-]+$"
          },
          "minItems": 1,
          "maxItems": 15,
          "description": "Thematic keywords (uppercase, 1-15 items)"
        },
        "page_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of pages visible in this image"
        },
        "document_summary": {
          "type": "string",
          "minLength": 50,
          "maxLength": 1500,
          "description": "Concise historical summary (1-3 sentences, 50-1500 characters)"
        }
      }
    },
    "original_text": {
      "type": "string",
      "description": "Faithful transcription preserving original artifacts, OCR errors, and formatting"
    },
    "reviewed_text": {
      "type": "string",
      "description": "Corrected transcription with OCR errors fixed and improved readability"
    },
    "confidence": {
      "type": "object",
      "required": ["overall", "concerns"],
      "additionalProperties": false,
      "properties": {
        "overall": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0,
          "description": "Overall confidence in transcription quality (0.0-1.0)"
        },
        "concerns": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Specific concerns or uncertainties for human review"
        }
      }
    }
  }
}
